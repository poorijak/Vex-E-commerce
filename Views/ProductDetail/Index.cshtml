@model Vex_E_commerce.Models.Product

@{
    ViewData["Title"] = "รายการสินค้า";
}

<h2>@ViewData["Title"]</h2>              

<div class="mx-56 pt-20">

    @* path แสดงผล  *@
    <div class="flex pb-10">
        <img src="~/Icon/Vector.svg"/>
        <a asp-action="Index" asp-controller="Home" class="p-5">Home</a>
        <img src="~/Icon/right_Icon.svg" class=""/>
        <a asp-action="Index" asp-controller="ProductDetail" class="p-5">Productdetail</a>
    </div>


    <div class="grid md:grid-cols-2 grid-cols-1 gap-4">
    
        @* Product detail *@
        <img src="@Model.PictureUrl" class="object-cover" />

        <div class="pl-20"> 
            <div>
                <p class="pb-4 text-muted-foreground text-xs md:text-sm">@ViewBag.categoryTitle</p>
                
                <div class="flex justify-between">
                    <h1 class="pb-5 text-2xl font-semibold">@Model.Title</h1>
                </div>

                <form method="post" asp-controller="Cart" asp-action="Add" id="addToCartForm">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="ProductId" value="@Model.Id" />

                    <!-- สี -->
                    <div class="flex gap-2">
                        @* <input type="radio" id="color-red" name="Color" value="Red" required />
                        <label for="color-red" class="color-dot bg-red-600"></label>

                        <input type="radio" id="color-black" name="Color" value="Black" />
                        <label for="color-black" class="color-dot bg-black"></label>

                        <input type="radio" id="color-White" name="Color" value="White" class="p-8 bg-black"/> *@

                        <label class="cursor-pointer">
                            <input type="checkbox" name="Color" value="Red" class="color-box hidden peer" />
                            <div class="w-8 h-8 rounded-md bg-red-600 border border-gray-300 peer-checked:border-black"></div>
                        </label>


                        <label class="cursor-pointer">
                            <input type="checkbox" id="color-red" name="Color" value="Red" class="color-box hidden peer" />
                            <div class="w-8 h-8 rounded-md bg-black border border-gray-300 peer-checked:border-black"></div>
                        </label>
                       
                        <label class="cursor-pointer">
                            <input type="checkbox" name="Color" value="White" class="color-box hidden peer"/>
                            <div class="w-8 h-8 rounded-md bg-white border border-gray-300 transition group-hover:border-gray-800 peer-checked:border-black"></div>
                        </label>
                      @*   <input type="radio" id="color-white" name="Color" value="White" />
                        <label for="color-white" class="color-dot bg-white border"></label> *@
                    </div>

                    <!-- ไซซ์ -->
                    <div class="font-semibold text-xl mb-3">Select size</div>

                    <div class="mt-3 flex gap-4">

                        <input type="radio" id="size-s" name="Size" value="S" class="hidden" />
                        <label for="size-s" class="
                            cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                            hover:border-black transition duration-150
                            checked:bg-black checked:text-white checked:border-black
                            ">
                            xs (4)
                        </label>

                        <input type="radio" id="size-s" name="Size" value="S" class="hidden" />
                        <label for="size-s" class="
                            cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                            hover:border-black transition duration-150
                            checked:bg-black checked:text-white checked:border-black
                            ">
                            S
                        </label>

                        <input type="radio" id="size-m" name="Size" value="M" class="hidden" />
                        <label for="size-m" class="
                            cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                            hover:border-black transition duration-150
                            checked:bg-black checked:text-white checked:border-black
                            ">
                            M
                        </label>

                        <input type="radio" id="size-l" name="Size" value="L" class="hidden" />
                        <label for="size-l" class="
                        cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                        hover:border-black transition duration-150
                        checked:bg-black checked:text-white checked:border-black
                        ">
                            L
                        </label>

                        <input type="radio" id="size-xl" name="Size" value="L" class="hidden" />
                        <label for="size-l" class="
                        cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                        hover:border-black transition duration-150
                        checked:bg-black checked:text-white checked:border-black
                        ">
                            XL
                        </label>

                        <input type="radio" id="size-xxl" name="Size" value="L" class="hidden" />
                        <label for="size-l" class="
                        cursor-pointer w-20 py-2 px-1 text-center border border-gray-300 rounded
                        hover:border-black transition duration-150
                        checked:bg-black checked:text-white checked:border-black
                        ">
                            XXL
                        </label>

                    </div>

                    <div class="pt-3">
                        <h1>Description</h1>
                        <p class="pt-3 text-xs text-muted-foreground">@Model.Description</p>
                    </div>

                    <div class="pt-10">
                        <button type="submit" class="px-6 w-full bg-primary text-white py-4">Add To Cart</button>
                    </div>
                </form>
               

                

                <div class="pt-10 grid gap-4">
               
                    
                    <div class="flex w-full items-center justify-center gap-4 border-[0.5px] border-primary px-6 py-4 transition-colors duration-200 hover:cursor-pointer hover:bg-primary hover:text-white">Buy Nowz</div>
                </div>
            </div>
        </div>

</div>
</div>

@section Scripts {
    <script>
        document.getElementById("addToCartForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);

            const res = await fetch("/cart/add", {
                method: "POST",
                body: formData
            });

            const json = await res.json();

            if (json.ok) {
                window.location.href = "/cart/view/" + json.cartId;
            }
        });
    </script>
}

@* @section Scripts {
    <script>
        function loadVariants(size ,color) {
            const productId = '@Model.Id';
            fetch(`/ProductDetail/GetVariantsBySize?productId=${productId}&color=${color}&size=${size}`)
                .then(response => {
                    if (!response.ok) throw new E01rror('Network error');
                    return response.text();
                })
                .then(html => {
                    document.getElementById('variantContainer').innerHTML = html;
                })
                .catch(err => console.error("Error loading variants:", err));
        }
    </script>
} *@
   